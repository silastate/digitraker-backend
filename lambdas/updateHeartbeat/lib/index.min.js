"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseData=void 0;const utils_1=require("./utils"),parsedPacket_1=require("./parsedPacket");function parseData(o){const n=new parsedPacket_1.ParsedPacket;try{if(o!==void 0)if(o=o.trim(),o.length===28||o.length===30){n.isParsed=!0;const e=o.split(""),i=e[0]+e[1];if(i==="20"){n.deviceType="FX300";const s=parseInt(e[28]+e[29],16).toString(2).padStart(8,"0");n.isResetPressed=s.charAt(4)==="1",n.isBatteryAlert=s.charAt(1)==="1";const r=e[2]+e[3];if(r==="00")n.sensorType="both channel mA";else if(r==="11")n.sensorType="both channel V";else if(r==="22")n.sensorType="both channel Positive Pressure";else if(r==="33")n.sensorType="both channel Negative Pressure";else{switch(n.sensorType="",e[2]){case"0":n.sensorType+="channel1 mA;";break;case"1":n.sensorType+="channel1 V;";break;case"2":n.sensorType+="channel1 Positive Pressure;";break;case"3":n.sensorType+="channel1 Negative Pressure;";break;default:n.sensorType+="channel1 No Probe;";break}switch(e[3]){case"0":n.sensorType+=" channel2 mA";break;case"1":n.sensorType+=" channel2 V ";break;case"2":n.sensorType+=" channel2 Positive Pressure ";break;case"3":n.sensorType+=" channel2 Negative Pressure ";break;default:n.sensorType+=" channel2 No Probe";break}}const t=e[6]+e[7]+e[8]+e[9]+e[10]+e[11]+e[12]+e[13],l=(0,utils_1.HexToFloat32)(t);l!==void 0?n.channel1=l:n.channel1="Missing Probe";const a=e[14]+e[15]+e[16]+e[17]+e[18]+e[19]+e[20]+e[21],c=(0,utils_1.HexToFloat32)(a);c!==void 0?n.channel2=c:n.channel2="Missing Probe"}else if("17,37".includes(i)){n.deviceType="FX100";const s=parseInt(e[26]+e[27],16).toString(2).padStart(8,"0");n.isResetPressed=s.charAt(4)==="1",n.isBatteryAlert=s.charAt(1)==="1";const r=e[4]+e[5]+e[6]+e[7]+e[8]+e[9]+e[10]+e[11],t=(0,utils_1.HexToFloat32)(r);t!==void 0?n.channel1=t:n.channel1="Missing Probe";const l=e[12]+e[13]+e[14]+e[15]+e[16]+e[17]+e[18]+e[19],a=(0,utils_1.HexToFloat32)(l);a!==void 0?n.channel2=a:n.channel2="Missing Probe"}else if("15,16,35,36".includes(i)){n.deviceType="FX200";const s=parseInt(e[26]+e[27],16).toString(2).padStart(8,"0");n.isResetPressed=s.charAt(4)==="1",n.isBatteryAlert=s.charAt(1)==="1";const r=e[4]+e[5]+e[6]+e[7]+e[8]+e[9]+e[10]+e[11],t=(0,utils_1.HexToFloat32)(r);t!==void 0?n.channel1=t:n.channel1="Missing Probe";const l=e[12]+e[13]+e[14]+e[15]+e[16]+e[17]+e[18]+e[19],a=(0,utils_1.HexToFloat32)(l);a!==void 0?n.channel2=a:n.channel2="Missing Probe"}else throw new Error("Invalid product identifier")}else throw new Error("Invalid data packet size");else throw new Error("Invalid data packet")}catch(e){n.isParsed=!1,n.errorMsg=String(e)}return n}exports.parseData=parseData,exports.default={parseData};
